2019-11-19 00:07:21 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.1416.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{<<"{\"candidate\": \"candidate:842163049 1 udp 1677729535 85.26.233.154 10399 typ srflx raddr 10.224.117.49 rport 41269\", \"sdpMid\": null, \"sdpMLineIndex\": null}">>}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 246,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"246">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43642},pid => <0.1415.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1416.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"246">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.1415.0>,<0.1206.0>,<0.1205.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1190.0>]
    message_queue_len: 0
    messages: []
    links: [<0.1415.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdhnp_y9qfGkFP4AAAmB">>}]}}]
    trap_exit: false
    status: running
    heap_size: 6772
    stack_size: 27
    reductions: 170401
  neighbours:
2019-11-19 00:07:21 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.1415.0>, stream 1 had its request process <0.1416.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{<<"{\"candidate\": \"candidate:842163049 1 udp 1677729535 85.26.233.154 10399 typ srflx raddr 10.224.117.49 rport 41269\", \"sdpMid\": null, \"sdpMLineIndex\": null}">>}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 246,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"246">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43642},pid => <0.1415.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1416.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"246">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 00:07:21 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.1422.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{<<"{\"candidate\": \"candidate:1498970736 1 udp 2113937151 10.224.117.49 41269 typ host\", \"sdpMid\": null, \"sdpMLineIndex\": null}">>}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 214,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"214">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43644},pid => <0.1421.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1422.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"214">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.1421.0>,<0.1206.0>,<0.1205.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1190.0>]
    message_queue_len: 0
    messages: []
    links: [<0.1421.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"FdhnqCBAXoXdKX4AAAmh">>}]}}]
    trap_exit: false
    status: running
    heap_size: 10958
    stack_size: 27
    reductions: 167372
  neighbours:
2019-11-19 00:07:21 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.1421.0>, stream 1 had its request process <0.1422.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{<<"{\"candidate\": \"candidate:1498970736 1 udp 2113937151 10.224.117.49 41269 typ host\", \"sdpMid\": null, \"sdpMLineIndex\": null}">>}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 214,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"214">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43644},pid => <0.1421.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1422.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"214">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 00:07:22 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.1426.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{<<"{\"candidate\": \"candidate:2212263285 1 udp 33562367 3.123.78.125 61235 typ relay raddr 85.26.233.154 rport 10399\", \"sdpMid\": null, \"sdpMLineIndex\": null}">>}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 244,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"244">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43646},pid => <0.1425.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1426.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"244">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.1425.0>,<0.1206.0>,<0.1205.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1190.0>]
    message_queue_len: 0
    messages: []
    links: [<0.1425.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"FdhnqESZ-Ucf2AAAAAnB">>}]}}]
    trap_exit: false
    status: running
    heap_size: 6772
    stack_size: 27
    reductions: 170619
  neighbours:
2019-11-19 00:07:22 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.1425.0>, stream 1 had its request process <0.1426.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{<<"{\"candidate\": \"candidate:2212263285 1 udp 33562367 3.123.78.125 61235 typ relay raddr 85.26.233.154 rport 10399\", \"sdpMid\": null, \"sdpMLineIndex\": null}">>}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 244,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"244">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43646},pid => <0.1425.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1426.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"244">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 00:08:10 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.1472.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{<<"{\"candidate\": \"candidate:1498970736 1 udp 2113937151 10.224.117.49 60427 typ host\", \"sdpMid\": null, \"sdpMLineIndex\": null}">>}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 214,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"214">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43662},pid => <0.1471.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1472.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"214">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.1471.0>,<0.1206.0>,<0.1205.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1190.0>]
    message_queue_len: 0
    messages: []
    links: [<0.1471.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdhns3Owl5YfhdcAAAHC">>}]}}]
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 169049
  neighbours:
2019-11-19 00:08:10 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.1471.0>, stream 1 had its request process <0.1472.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{<<"{\"candidate\": \"candidate:1498970736 1 udp 2113937151 10.224.117.49 60427 typ host\", \"sdpMid\": null, \"sdpMLineIndex\": null}">>}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 214,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"214">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43662},pid => <0.1471.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1472.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"214">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 00:08:10 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.1476.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{<<"{\"candidate\": \"candidate:842163049 1 udp 1677729535 85.26.233.154 26694 typ srflx raddr 10.224.117.49 rport 60427\", \"sdpMid\": null, \"sdpMLineIndex\": null}">>}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 246,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"246">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43664},pid => <0.1475.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1476.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"246">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.1475.0>,<0.1206.0>,<0.1205.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1190.0>]
    message_queue_len: 0
    messages: []
    links: [<0.1475.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdhns5ZUXktNXm0AAAHi">>}]}}]
    trap_exit: false
    status: running
    heap_size: 10958
    stack_size: 27
    reductions: 168759
  neighbours:
2019-11-19 00:08:10 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.1475.0>, stream 1 had its request process <0.1476.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{<<"{\"candidate\": \"candidate:842163049 1 udp 1677729535 85.26.233.154 26694 typ srflx raddr 10.224.117.49 rport 60427\", \"sdpMid\": null, \"sdpMLineIndex\": null}">>}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 246,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"246">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43664},pid => <0.1475.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1476.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"246">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 00:08:11 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.1480.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{<<"{\"candidate\": \"candidate:2212263285 1 udp 33562367 3.123.78.125 51955 typ relay raddr 85.26.233.154 rport 26694\", \"sdpMid\": null, \"sdpMLineIndex\": null}">>}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 244,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"244">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43666},pid => <0.1479.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1480.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"244">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.1479.0>,<0.1206.0>,<0.1205.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1190.0>]
    message_queue_len: 0
    messages: []
    links: [<0.1479.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdhns7lQzGFXJmMAAAIC">>}]}}]
    trap_exit: false
    status: running
    heap_size: 6772
    stack_size: 27
    reductions: 170204
  neighbours:
2019-11-19 00:08:11 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.1479.0>, stream 1 had its request process <0.1480.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{<<"{\"candidate\": \"candidate:2212263285 1 udp 33562367 3.123.78.125 51955 typ relay raddr 85.26.233.154 rport 26694\", \"sdpMid\": null, \"sdpMLineIndex\": null}">>}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 244,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"244">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43666},pid => <0.1479.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1480.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"244">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 00:48:12 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.1466.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:1498970736 1 udp 2113937151 10.224.117.49 54053 typ host">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 204,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"204">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43774},pid => <0.1465.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1466.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"204">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.1465.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.1465.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdhp4tKTZNL9IDkAAAdh">>}]}}]
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 174681
  neighbours:
2019-11-19 00:48:12 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.1465.0>, stream 1 had its request process <0.1466.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:1498970736 1 udp 2113937151 10.224.117.49 54053 typ host">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 204,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"204">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43774},pid => <0.1465.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1466.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"204">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 00:48:13 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.1470.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:842163049 1 udp 1677729535 85.26.233.154 54865 typ srflx raddr 10.224.117.49 rport 54053">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 236,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"236">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43776},pid => <0.1469.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1470.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"236">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.1469.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.1469.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdhp4v2b3Fa9nP4AAAwC">>}]}}]
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 175190
  neighbours:
2019-11-19 00:48:13 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.1469.0>, stream 1 had its request process <0.1470.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:842163049 1 udp 1677729535 85.26.233.154 54865 typ srflx raddr 10.224.117.49 rport 54053">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 236,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"236">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43776},pid => <0.1469.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1470.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"236">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 00:48:14 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.1474.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:2212263285 1 udp 33562367 3.123.78.125 57743 typ relay raddr 85.26.233.154 rport 54865">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 234,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"234">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43778},pid => <0.1473.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1474.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"234">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.1473.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.1473.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdhp40nv7slssGsAAAwi">>}]}}]
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 176026
  neighbours:
2019-11-19 00:48:14 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.1473.0>, stream 1 had its request process <0.1474.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:2212263285 1 udp 33562367 3.123.78.125 57743 typ relay raddr 85.26.233.154 rport 54865">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 234,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"234">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43778},pid => <0.1473.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1474.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"234">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 00:49:35 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.1491.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.Phoenix.Router.NoRouteError',conn => #{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"host">> => <<"169.254.169.254">>,<<"user-agent">> => <<"AWS Security Scanner">>,<<"x-forwarded-for">> => <<"44.224.22.196">>,<<"x-forwarded-host">> => <<"169.254.169.254">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"44.224.22.196">>},host => <<"169.254.169.254">>,host_info => undefined,method => <<"GET">>,path => <<"/latest/dynamic/instance-identity/document">>,path_info => undefined,peer => {{127,0,0,1},41304},pid => <0.1490.0>,port => 80,qs => <<>>,ref => 'Elixir.DomoapiWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [#Fun<Elixir.Plug.Logger.1.16531471>,#Fun<Elixir.Phoenix.LiveReloader.0.121962774>],body_params => #{},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"169.254.169.254">>,method => <<"GET">>,owner => <0.1491.0>,params => #{},path_info => [<<"latest">>,<<"dynamic">>,<<"instance-identity">>,<<"document">>],path_params => #{},port => 80,private => #{'Elixir.DomoapiWeb.Router' => {[],#{'Elixir.PhoenixSwagger.Plug.SwaggerUI' => []}},phoenix_endpoint => 'Elixir.DomoapiWeb.Endpoint',phoenix_router => 'Elixir.DomoapiWeb.Router',plug_session_fetch => #Fun<Elixir.Plug.Session.1.35161479>},query_params => #{},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"host">>,<<"169.254.169.254">>},{<<"user-agent">>,<<"AWS Security Scanner">>},{<<"x-forwarded-for">>,<<"44.224.22.196">>},{<<"x-forwarded-host">>,<<"169.254.169.254">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"44.224.22.196">>}],request_path => <<"/latest/dynamic/instance-identity/document">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>},{<<"x-request-id">>,<<"Fdhp9gx30fLKMTMAAAfh">>}],scheme => http,script_name => [],secret_key_base => <<"ev62lNRCtdBr39e00iYHTrEOGGHD1c9L8fi2zWw/4vDZF0w1S3HpUxXLVMCV4atf">>,state => unset,status => nil},message => <<"no route found for GET /latest/dynamic/instance-identity/document (DomoapiWeb.Router)">>,plug_status => 404,router => 'Elixir.DomoapiWeb.Router'},[{'Elixir.DomoapiWeb.Router','__match_route__',4,[{file,"lib/domoapi_web/router.ex"},{line,1}]},{'Elixir.DomoapiWeb.Router',call,2,[{file,"lib/phoenix/router.ex"},{line,304}]},{'Elixir.DomoapiWeb.Endpoint',plug_builder_call,2,[{file,"lib/domoapi_web/endpoint.ex"},{line,1}]},{'Elixir.DomoapiWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.DomoapiWeb.Endpoint',call,2,[{file,"lib/domoapi_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.DomoapiWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"host">> => <<"169.254.169.254">>,<<"user-agent">> => <<"AWS Security Scanner">>,<<"x-forwarded-for">> => <<"44.224.22.196">>,<<"x-forwarded-host">> => <<"169.254.169.254">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"44.224.22.196">>},host => <<"169.254.169.254">>,host_info => undefined,method => <<"GET">>,path => <<"/latest/dynamic/instance-identity/document">>,path_info => undefined,peer => {{127,0,0,1},41304},pid => <0.1490.0>,port => 80,qs => <<>>,ref => 'Elixir.DomoapiWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"169.254.169.254">>,method => <<"GET">>,owner => <0.1491.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"latest">>,<<"dynamic">>,<<"instance-identity">>,<<"document">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"host">>,<<"169.254.169.254">>},{<<"user-agent">>,<<"AWS Security Scanner">>},{<<"x-forwarded-for">>,<<"44.224.22.196">>},{<<"x-forwarded-host">>,<<"169.254.169.254">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"44.224.22.196">>}],request_path => <<"/latest/dynamic/instance-identity/document">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.1490.0>,<0.893.0>,<0.892.0>,'Elixir.DomoapiWeb.Endpoint','Elixir.DomoapiWeb.Supervisor',<0.872.0>]
    message_queue_len: 0
    messages: []
    links: [<0.1490.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdhp9gx30fLKMTMAAAfh">>}]}}]
    trap_exit: false
    status: running
    heap_size: 17731
    stack_size: 27
    reductions: 131487
  neighbours:
2019-11-19 00:49:35 =ERROR REPORT====
Ranch listener 'Elixir.DomoapiWeb.Endpoint.HTTP', connection process <0.1490.0>, stream 1 had its request process <0.1491.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.Phoenix.Router.NoRouteError',conn => #{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"host">> => <<"169.254.169.254">>,<<"user-agent">> => <<"AWS Security Scanner">>,<<"x-forwarded-for">> => <<"44.224.22.196">>,<<"x-forwarded-host">> => <<"169.254.169.254">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"44.224.22.196">>},host => <<"169.254.169.254">>,host_info => undefined,method => <<"GET">>,path => <<"/latest/dynamic/instance-identity/document">>,path_info => undefined,peer => {{127,0,0,1},41304},pid => <0.1490.0>,port => 80,qs => <<>>,ref => 'Elixir.DomoapiWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [#Fun<Elixir.Plug.Logger.1.16531471>,#Fun<Elixir.Phoenix.LiveReloader.0.121962774>],body_params => #{},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"169.254.169.254">>,method => <<"GET">>,owner => <0.1491.0>,params => #{},path_info => [<<"latest">>,<<"dynamic">>,<<"instance-identity">>,<<"document">>],path_params => #{},port => 80,private => #{'Elixir.DomoapiWeb.Router' => {[],#{'Elixir.PhoenixSwagger.Plug.SwaggerUI' => []}},phoenix_endpoint => 'Elixir.DomoapiWeb.Endpoint',phoenix_router => 'Elixir.DomoapiWeb.Router',plug_session_fetch => #Fun<Elixir.Plug.Session.1.35161479>},query_params => #{},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"host">>,<<"169.254.169.254">>},{<<"user-agent">>,<<"AWS Security Scanner">>},{<<"x-forwarded-for">>,<<"44.224.22.196">>},{<<"x-forwarded-host">>,<<"169.254.169.254">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"44.224.22.196">>}],request_path => <<"/latest/dynamic/instance-identity/document">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>},{<<"x-request-id">>,<<"Fdhp9gx30fLKMTMAAAfh">>}],scheme => http,script_name => [],secret_key_base => <<"ev62lNRCtdBr39e00iYHTrEOGGHD1c9L8fi2zWw/4vDZF0w1S3HpUxXLVMCV4atf">>,state => unset,status => nil},message => <<"no route found for GET /latest/dynamic/instance-identity/document (DomoapiWeb.Router)">>,plug_status => 404,router => 'Elixir.DomoapiWeb.Router'},[{'Elixir.DomoapiWeb.Router','__match_route__',4,[{file,"lib/domoapi_web/router.ex"},{line,1}]},{'Elixir.DomoapiWeb.Router',call,2,[{file,"lib/phoenix/router.ex"},{line,304}]},{'Elixir.DomoapiWeb.Endpoint',plug_builder_call,2,[{file,"lib/domoapi_web/endpoint.ex"},{line,1}]},{'Elixir.DomoapiWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.DomoapiWeb.Endpoint',call,2,[{file,"lib/domoapi_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.DomoapiWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"host">> => <<"169.254.169.254">>,<<"user-agent">> => <<"AWS Security Scanner">>,<<"x-forwarded-for">> => <<"44.224.22.196">>,<<"x-forwarded-host">> => <<"169.254.169.254">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"44.224.22.196">>},host => <<"169.254.169.254">>,host_info => undefined,method => <<"GET">>,path => <<"/latest/dynamic/instance-identity/document">>,path_info => undefined,peer => {{127,0,0,1},41304},pid => <0.1490.0>,port => 80,qs => <<>>,ref => 'Elixir.DomoapiWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"169.254.169.254">>,method => <<"GET">>,owner => <0.1491.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"latest">>,<<"dynamic">>,<<"instance-identity">>,<<"document">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"host">>,<<"169.254.169.254">>},{<<"user-agent">>,<<"AWS Security Scanner">>},{<<"x-forwarded-for">>,<<"44.224.22.196">>},{<<"x-forwarded-host">>,<<"169.254.169.254">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"44.224.22.196">>}],request_path => <<"/latest/dynamic/instance-identity/document">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 00:49:36 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.1495.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.Phoenix.Router.NoRouteError',conn => #{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"host">> => <<"[::ffff:a9fe:a9fe]">>,<<"user-agent">> => <<"AWS Security Scanner">>,<<"x-forwarded-for">> => <<"44.224.22.196">>,<<"x-forwarded-host">> => <<"[::ffff:a9fe:a9fe]">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"44.224.22.196">>},host => <<"[::ffff:a9fe:a9fe]">>,host_info => undefined,method => <<"GET">>,path => <<"/latest/dynamic/instance-identity/document">>,path_info => undefined,peer => {{127,0,0,1},41306},pid => <0.1494.0>,port => 80,qs => <<>>,ref => 'Elixir.DomoapiWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [#Fun<Elixir.Plug.Logger.1.16531471>,#Fun<Elixir.Phoenix.LiveReloader.0.121962774>],body_params => #{},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"[::ffff:a9fe:a9fe]">>,method => <<"GET">>,owner => <0.1495.0>,params => #{},path_info => [<<"latest">>,<<"dynamic">>,<<"instance-identity">>,<<"document">>],path_params => #{},port => 80,private => #{'Elixir.DomoapiWeb.Router' => {[],#{'Elixir.PhoenixSwagger.Plug.SwaggerUI' => []}},phoenix_endpoint => 'Elixir.DomoapiWeb.Endpoint',phoenix_router => 'Elixir.DomoapiWeb.Router',plug_session_fetch => #Fun<Elixir.Plug.Session.1.35161479>},query_params => #{},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"host">>,<<"[::ffff:a9fe:a9fe]">>},{<<"user-agent">>,<<"AWS Security Scanner">>},{<<"x-forwarded-for">>,<<"44.224.22.196">>},{<<"x-forwarded-host">>,<<"[::ffff:a9fe:a9fe]">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"44.224.22.196">>}],request_path => <<"/latest/dynamic/instance-identity/document">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>},{<<"x-request-id">>,<<"Fdhp9kKXcGvQ5agAAAxC">>}],scheme => http,script_name => [],secret_key_base => <<"ev62lNRCtdBr39e00iYHTrEOGGHD1c9L8fi2zWw/4vDZF0w1S3HpUxXLVMCV4atf">>,state => unset,status => nil},message => <<"no route found for GET /latest/dynamic/instance-identity/document (DomoapiWeb.Router)">>,plug_status => 404,router => 'Elixir.DomoapiWeb.Router'},[{'Elixir.DomoapiWeb.Router','__match_route__',4,[{file,"lib/domoapi_web/router.ex"},{line,1}]},{'Elixir.DomoapiWeb.Router',call,2,[{file,"lib/phoenix/router.ex"},{line,304}]},{'Elixir.DomoapiWeb.Endpoint',plug_builder_call,2,[{file,"lib/domoapi_web/endpoint.ex"},{line,1}]},{'Elixir.DomoapiWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.DomoapiWeb.Endpoint',call,2,[{file,"lib/domoapi_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.DomoapiWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"host">> => <<"[::ffff:a9fe:a9fe]">>,<<"user-agent">> => <<"AWS Security Scanner">>,<<"x-forwarded-for">> => <<"44.224.22.196">>,<<"x-forwarded-host">> => <<"[::ffff:a9fe:a9fe]">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"44.224.22.196">>},host => <<"[::ffff:a9fe:a9fe]">>,host_info => undefined,method => <<"GET">>,path => <<"/latest/dynamic/instance-identity/document">>,path_info => undefined,peer => {{127,0,0,1},41306},pid => <0.1494.0>,port => 80,qs => <<>>,ref => 'Elixir.DomoapiWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"[::ffff:a9fe:a9fe]">>,method => <<"GET">>,owner => <0.1495.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"latest">>,<<"dynamic">>,<<"instance-identity">>,<<"document">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"host">>,<<"[::ffff:a9fe:a9fe]">>},{<<"user-agent">>,<<"AWS Security Scanner">>},{<<"x-forwarded-for">>,<<"44.224.22.196">>},{<<"x-forwarded-host">>,<<"[::ffff:a9fe:a9fe]">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"44.224.22.196">>}],request_path => <<"/latest/dynamic/instance-identity/document">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.1494.0>,<0.893.0>,<0.892.0>,'Elixir.DomoapiWeb.Endpoint','Elixir.DomoapiWeb.Supervisor',<0.872.0>]
    message_queue_len: 0
    messages: []
    links: [<0.1494.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdhp9kKXcGvQ5agAAAxC">>}]}}]
    trap_exit: false
    status: running
    heap_size: 17731
    stack_size: 27
    reductions: 132052
  neighbours:
2019-11-19 00:49:36 =ERROR REPORT====
Ranch listener 'Elixir.DomoapiWeb.Endpoint.HTTP', connection process <0.1494.0>, stream 1 had its request process <0.1495.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.Phoenix.Router.NoRouteError',conn => #{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"host">> => <<"[::ffff:a9fe:a9fe]">>,<<"user-agent">> => <<"AWS Security Scanner">>,<<"x-forwarded-for">> => <<"44.224.22.196">>,<<"x-forwarded-host">> => <<"[::ffff:a9fe:a9fe]">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"44.224.22.196">>},host => <<"[::ffff:a9fe:a9fe]">>,host_info => undefined,method => <<"GET">>,path => <<"/latest/dynamic/instance-identity/document">>,path_info => undefined,peer => {{127,0,0,1},41306},pid => <0.1494.0>,port => 80,qs => <<>>,ref => 'Elixir.DomoapiWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [#Fun<Elixir.Plug.Logger.1.16531471>,#Fun<Elixir.Phoenix.LiveReloader.0.121962774>],body_params => #{},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"[::ffff:a9fe:a9fe]">>,method => <<"GET">>,owner => <0.1495.0>,params => #{},path_info => [<<"latest">>,<<"dynamic">>,<<"instance-identity">>,<<"document">>],path_params => #{},port => 80,private => #{'Elixir.DomoapiWeb.Router' => {[],#{'Elixir.PhoenixSwagger.Plug.SwaggerUI' => []}},phoenix_endpoint => 'Elixir.DomoapiWeb.Endpoint',phoenix_router => 'Elixir.DomoapiWeb.Router',plug_session_fetch => #Fun<Elixir.Plug.Session.1.35161479>},query_params => #{},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"host">>,<<"[::ffff:a9fe:a9fe]">>},{<<"user-agent">>,<<"AWS Security Scanner">>},{<<"x-forwarded-for">>,<<"44.224.22.196">>},{<<"x-forwarded-host">>,<<"[::ffff:a9fe:a9fe]">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"44.224.22.196">>}],request_path => <<"/latest/dynamic/instance-identity/document">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>},{<<"x-request-id">>,<<"Fdhp9kKXcGvQ5agAAAxC">>}],scheme => http,script_name => [],secret_key_base => <<"ev62lNRCtdBr39e00iYHTrEOGGHD1c9L8fi2zWw/4vDZF0w1S3HpUxXLVMCV4atf">>,state => unset,status => nil},message => <<"no route found for GET /latest/dynamic/instance-identity/document (DomoapiWeb.Router)">>,plug_status => 404,router => 'Elixir.DomoapiWeb.Router'},[{'Elixir.DomoapiWeb.Router','__match_route__',4,[{file,"lib/domoapi_web/router.ex"},{line,1}]},{'Elixir.DomoapiWeb.Router',call,2,[{file,"lib/phoenix/router.ex"},{line,304}]},{'Elixir.DomoapiWeb.Endpoint',plug_builder_call,2,[{file,"lib/domoapi_web/endpoint.ex"},{line,1}]},{'Elixir.DomoapiWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.DomoapiWeb.Endpoint',call,2,[{file,"lib/domoapi_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.DomoapiWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 0,cert => undefined,has_body => false,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"host">> => <<"[::ffff:a9fe:a9fe]">>,<<"user-agent">> => <<"AWS Security Scanner">>,<<"x-forwarded-for">> => <<"44.224.22.196">>,<<"x-forwarded-host">> => <<"[::ffff:a9fe:a9fe]">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"44.224.22.196">>},host => <<"[::ffff:a9fe:a9fe]">>,host_info => undefined,method => <<"GET">>,path => <<"/latest/dynamic/instance-identity/document">>,path_info => undefined,peer => {{127,0,0,1},41306},pid => <0.1494.0>,port => 80,qs => <<>>,ref => 'Elixir.DomoapiWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8080},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"[::ffff:a9fe:a9fe]">>,method => <<"GET">>,owner => <0.1495.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"latest">>,<<"dynamic">>,<<"instance-identity">>,<<"document">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"host">>,<<"[::ffff:a9fe:a9fe]">>},{<<"user-agent">>,<<"AWS Security Scanner">>},{<<"x-forwarded-for">>,<<"44.224.22.196">>},{<<"x-forwarded-host">>,<<"[::ffff:a9fe:a9fe]">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"44.224.22.196">>}],request_path => <<"/latest/dynamic/instance-identity/document">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 00:50:13 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.1544.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:1498970736 1 udp 2113937151 10.224.117.49 50336 typ host">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 204,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"204">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43808},pid => <0.1543.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1544.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"204">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.1543.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.1543.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdhp_vEExtMOVIoAAAkh">>}]}}]
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 174436
  neighbours:
2019-11-19 00:50:13 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.1543.0>, stream 1 had its request process <0.1544.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:1498970736 1 udp 2113937151 10.224.117.49 50336 typ host">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 204,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"204">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43808},pid => <0.1543.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1544.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"204">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 00:50:15 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.1548.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:842163049 1 udp 1677729535 85.26.233.154 33263 typ srflx raddr 10.224.117.49 rport 50336">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 236,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"236">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43810},pid => <0.1547.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1548.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"236">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.1547.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.1547.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdhp_1KxIbIThdQAAAlB">>}]}}]
    trap_exit: false
    status: running
    heap_size: 6772
    stack_size: 27
    reductions: 173653
  neighbours:
2019-11-19 00:50:15 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.1547.0>, stream 1 had its request process <0.1548.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:842163049 1 udp 1677729535 85.26.233.154 33263 typ srflx raddr 10.224.117.49 rport 50336">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 236,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"236">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43810},pid => <0.1547.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1548.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"236">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 00:50:17 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.1552.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:2212263285 1 udp 33562367 3.123.78.125 61084 typ relay raddr 85.26.233.154 rport 33263">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 234,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"234">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43812},pid => <0.1551.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1552.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"234">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.1551.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.1551.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdhp_9iS3kdDJhUAAAlh">>}]}}]
    trap_exit: false
    status: running
    heap_size: 6772
    stack_size: 27
    reductions: 173609
  neighbours:
2019-11-19 00:50:17 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.1551.0>, stream 1 had its request process <0.1552.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:2212263285 1 udp 33562367 3.123.78.125 61084 typ relay raddr 85.26.233.154 rport 33263">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 234,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"234">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},43812},pid => <0.1551.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.1552.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"234">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 04:31:40 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.2173.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:1498970736 1 udp 2113937151 10.224.117.49 33255 typ host">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 204,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"204">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44450},pid => <0.2172.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2173.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"204">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.2172.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.2172.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh2FJZ6bngkN5QAABth">>}]}}]
    trap_exit: false
    status: running
    heap_size: 10958
    stack_size: 27
    reductions: 172190
  neighbours:
2019-11-19 04:31:40 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.2172.0>, stream 1 had its request process <0.2173.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:1498970736 1 udp 2113937151 10.224.117.49 33255 typ host">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 204,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"204">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44450},pid => <0.2172.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2173.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"204">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 04:31:41 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.2177.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:842163049 1 udp 1677729535 85.26.233.154 1646 typ srflx raddr 10.224.117.49 rport 33255">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 235,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"235">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44452},pid => <0.2176.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2177.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"235">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.2176.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.2176.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh2FMgHBWIgc6oAABuB">>}]}}]
    trap_exit: false
    status: running
    heap_size: 10958
    stack_size: 27
    reductions: 173238
  neighbours:
2019-11-19 04:31:41 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.2176.0>, stream 1 had its request process <0.2177.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:842163049 1 udp 1677729535 85.26.233.154 1646 typ srflx raddr 10.224.117.49 rport 33255">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 235,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"235">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44452},pid => <0.2176.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2177.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"235">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 04:31:42 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.2181.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:2212263285 1 udp 33562367 3.123.78.125 55252 typ relay raddr 85.26.233.154 rport 1646">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 233,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"233">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44454},pid => <0.2180.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2181.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"233">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.2180.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.2180.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh2FPq51t5nfi8AAAGD">>}]}}]
    trap_exit: false
    status: running
    heap_size: 4185
    stack_size: 27
    reductions: 175132
  neighbours:
2019-11-19 04:31:42 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.2180.0>, stream 1 had its request process <0.2181.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:2212263285 1 udp 33562367 3.123.78.125 55252 typ relay raddr 85.26.233.154 rport 1646">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 233,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"233">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44454},pid => <0.2180.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2181.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"233">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 04:40:50 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.2297.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:1910078557 1 udp 2113937151 192.168.1.121 34762 typ host">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 204,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"204">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44522},pid => <0.2296.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2297.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"204">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.2296.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.2296.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh2lIaCchJEdYQAAB7B">>}]}}]
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 174463
  neighbours:
2019-11-19 04:40:50 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.2296.0>, stream 1 had its request process <0.2297.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:1910078557 1 udp 2113937151 192.168.1.121 34762 typ host">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 204,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"204">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44522},pid => <0.2296.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2297.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"204">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 04:40:51 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.2301.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:842163049 1 udp 1677729535 87.76.0.8 37062 typ srflx raddr 192.168.1.121 rport 34762">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 232,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"232">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44524},pid => <0.2300.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2301.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"232">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.2300.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.2300.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh2lMA4xtR72CIAAAGj">>}]}}]
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 175980
  neighbours:
2019-11-19 04:40:51 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.2300.0>, stream 1 had its request process <0.2301.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:842163049 1 udp 1677729535 87.76.0.8 37062 typ srflx raddr 192.168.1.121 rport 34762">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 232,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"232">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44524},pid => <0.2300.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2301.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"232">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 04:40:51 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.2305.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:2212263285 1 udp 33562367 3.123.78.125 55133 typ relay raddr 87.76.0.8 rport 37062">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 230,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"230">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44526},pid => <0.2304.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2305.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"230">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.2304.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.2304.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh2lPIyIBNSSIwAAAHD">>}]}}]
    trap_exit: false
    status: running
    heap_size: 6772
    stack_size: 27
    reductions: 173513
  neighbours:
2019-11-19 04:41:53 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.2351.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:1910078557 1 udp 2113937151 192.168.1.121 36271 typ host">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 204,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"204">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44542},pid => <0.2350.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2351.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"204">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.2350.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.2350.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh2o17zBjUIWNYAAAhi">>}]}}]
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 173358
  neighbours:
2019-11-19 04:41:53 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.2350.0>, stream 1 had its request process <0.2351.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:1910078557 1 udp 2113937151 192.168.1.121 36271 typ host">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 204,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"204">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44542},pid => <0.2350.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2351.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"204">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 04:41:54 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.2355.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:2212263285 1 udp 33562367 3.123.78.125 49653 typ relay raddr 85.26.233.154 rport 9447">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 233,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"233">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44544},pid => <0.2354.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2355.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"233">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.2354.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.2354.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh2o4xsNdKfu9wAAB-B">>}]}}]
    trap_exit: false
    status: running
    heap_size: 6772
    stack_size: 27
    reductions: 173586
  neighbours:
2019-11-19 04:41:54 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.2354.0>, stream 1 had its request process <0.2355.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:2212263285 1 udp 33562367 3.123.78.125 49653 typ relay raddr 85.26.233.154 rport 9447">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 233,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"233">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44544},pid => <0.2354.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2355.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"233">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 04:41:57 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.2359.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:842163049 1 udp 1677729535 85.26.233.154 9447 typ srflx raddr 192.168.1.121 rport 36271">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 235,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"235">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44546},pid => <0.2358.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2359.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"235">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.2358.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.2358.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh2pBzwilK7eA8AAAiC">>}]}}]
    trap_exit: false
    status: running
    heap_size: 6772
    stack_size: 27
    reductions: 173692
  neighbours:
2019-11-19 04:41:57 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.2358.0>, stream 1 had its request process <0.2359.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:842163049 1 udp 1677729535 85.26.233.154 9447 typ srflx raddr 192.168.1.121 rport 36271">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 235,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"235">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44546},pid => <0.2358.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2359.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"235">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 04:57:59 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.2729.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.BadFunctionError',term => #{'__exception__' => true,'__struct__' => 'Elixir.Phoenix.ActionClauseError',args => [#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 15,cert => undefined,has_body => true,has_read_body => true,headers => #{<<"accept-charset">> => <<"UTF-8">>,<<"accept-encoding">> => <<"gzip">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"15">>,<<"content-type">> => <<"application/x-www-form-urlencoded; charset=UTF-8">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Dalvik/2.1.0 (Linux; U; Android 9; JSN-L21 Build/HONORJSN-L21)">>,<<"x-forwarded-for">> => <<"85.26.233.154">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"85.26.233.154">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/client/hang">>,path_info => undefined,peer => {{127,0,0,1},44628},pid => <0.2728.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [#Fun<Elixir.Plug.Logger.1.16531471>],body_params => #{<<"client_id">> => <<"test1">>},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2729.0>,params => #{<<"client_id">> => <<"test1">>},path_info => [<<"signaling">>,<<"client">>,<<"hang">>],path_params => #{},port => 80,private => #{'Elixir.SignallingWeb.Router' => {[],#{'Elixir.PhoenixSwagger.Plug.SwaggerUI' => []}},phoenix_action => hang,phoenix_controller => 'Elixir.SignallingWeb.ClientController',phoenix_endpoint => 'Elixir.SignallingWeb.Endpoint',phoenix_format => <<"json">>,phoenix_layout => {'Elixir.SignallingWeb.LayoutView',app},phoenix_pipelines => [api],phoenix_router => 'Elixir.SignallingWeb.Router',phoenix_view => 'Elixir.SignallingWeb.ClientView',plug_session_fetch => #Fun<Elixir.Plug.Session.1.35161479>},query_params => #{},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept-charset">>,<<"UTF-8">>},{<<"accept-encoding">>,<<"gzip">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"15">>},{<<"content-type">>,<<"application/x-www-form-urlencoded; charset=UTF-8">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Dalvik/2.1.0 (Linux; U; Android 9; JSN-L21 Build/HONORJSN-L21)">>},{<<"x-forwarded-for">>,<<"85.26.233.154">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"85.26.233.154">>}],request_path => <<"/signaling/client/hang">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>},{<<"x-request-id">>,<<"Fdh3hEln5RSB1E4AACSB">>}],scheme => http,script_name => [],secret_key_base => <<"QbYUrrjFN0Riyga9S+fzwVIOzV9huX5roR8nCd2Py1QXjvP4xxmSIuPidPSkL+aJ">>,state => unset,status => nil},#{<<"client_id">> => <<"test1">>}],arity => 2,clauses => nil,function => hang,kind => nil,module => 'Elixir.SignallingWeb.ClientController'}},[{'Elixir.FunctionClauseError','-blame/3-fun-0-',2,[{file,"lib/exception.ex"},{line,1105}]},{'Elixir.Enum','-map/2-lists^map/1-0-',2,[{file,"lib/enum.ex"},{line,1336}]},{'Elixir.FunctionClauseError',blame,3,[{file,"lib/exception.ex"},{line,1104}]},{'Elixir.Phoenix.ActionClauseError',blame,2,[{file,"lib/phoenix/exceptions.ex"},{line,59}]},{'Elixir.Plug.Debugger',render,6,[{file,"lib/plug/debugger.ex"},{line,197}]},{'Elixir.Plug.Debugger','__catch__',5,[{file,"lib/plug/debugger.ex"},{line,147}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 15,cert => undefined,has_body => true,headers => #{<<"accept-charset">> => <<"UTF-8">>,<<"accept-encoding">> => <<"gzip">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"15">>,<<"content-type">> => <<"application/x-www-form-urlencoded; charset=UTF-8">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Dalvik/2.1.0 (Linux; U; Android 9; JSN-L21 Build/HONORJSN-L21)">>,<<"x-forwarded-for">> => <<"85.26.233.154">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"85.26.233.154">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/client/hang">>,path_info => undefined,peer => {{127,0,0,1},44628},pid => <0.2728.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2729.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"client">>,<<"hang">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept-charset">>,<<"UTF-8">>},{<<"accept-encoding">>,<<"gzip">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"15">>},{<<"content-type">>,<<"application/x-www-form-urlencoded; charset=UTF-8">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Dalvik/2.1.0 (Linux; U; Android 9; JSN-L21 Build/HONORJSN-L21)">>},{<<"x-forwarded-for">>,<<"85.26.233.154">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"85.26.233.154">>}],request_path => <<"/signaling/client/hang">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.2728.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.2728.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh3hEln5RSB1E4AACSB">>}]}}]
    trap_exit: false
    status: running
    heap_size: 4185
    stack_size: 27
    reductions: 38593
  neighbours:
2019-11-19 04:57:59 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.2728.0>, stream 1 had its request process <0.2729.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.BadFunctionError',term => #{'__exception__' => true,'__struct__' => 'Elixir.Phoenix.ActionClauseError',args => [#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 15,cert => undefined,has_body => true,has_read_body => true,headers => #{<<"accept-charset">> => <<"UTF-8">>,<<"accept-encoding">> => <<"gzip">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"15">>,<<"content-type">> => <<"application/x-www-form-urlencoded; charset=UTF-8">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Dalvik/2.1.0 (Linux; U; Android 9; JSN-L21 Build/HONORJSN-L21)">>,<<"x-forwarded-for">> => <<"85.26.233.154">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"85.26.233.154">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/client/hang">>,path_info => undefined,peer => {{127,0,0,1},44628},pid => <0.2728.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [#Fun<Elixir.Plug.Logger.1.16531471>],body_params => #{<<"client_id">> => <<"test1">>},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2729.0>,params => #{<<"client_id">> => <<"test1">>},path_info => [<<"signaling">>,<<"client">>,<<"hang">>],path_params => #{},port => 80,private => #{'Elixir.SignallingWeb.Router' => {[],#{'Elixir.PhoenixSwagger.Plug.SwaggerUI' => []}},phoenix_action => hang,phoenix_controller => 'Elixir.SignallingWeb.ClientController',phoenix_endpoint => 'Elixir.SignallingWeb.Endpoint',phoenix_format => <<"json">>,phoenix_layout => {'Elixir.SignallingWeb.LayoutView',app},phoenix_pipelines => [api],phoenix_router => 'Elixir.SignallingWeb.Router',phoenix_view => 'Elixir.SignallingWeb.ClientView',plug_session_fetch => #Fun<Elixir.Plug.Session.1.35161479>},query_params => #{},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept-charset">>,<<"UTF-8">>},{<<"accept-encoding">>,<<"gzip">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"15">>},{<<"content-type">>,<<"application/x-www-form-urlencoded; charset=UTF-8">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Dalvik/2.1.0 (Linux; U; Android 9; JSN-L21 Build/HONORJSN-L21)">>},{<<"x-forwarded-for">>,<<"85.26.233.154">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"85.26.233.154">>}],request_path => <<"/signaling/client/hang">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>},{<<"x-request-id">>,<<"Fdh3hEln5RSB1E4AACSB">>}],scheme => http,script_name => [],secret_key_base => <<"QbYUrrjFN0Riyga9S+fzwVIOzV9huX5roR8nCd2Py1QXjvP4xxmSIuPidPSkL+aJ">>,state => unset,status => nil},#{<<"client_id">> => <<"test1">>}],arity => 2,clauses => nil,function => hang,kind => nil,module => 'Elixir.SignallingWeb.ClientController'}},[{'Elixir.FunctionClauseError','-blame/3-fun-0-',2,[{file,"lib/exception.ex"},{line,1105}]},{'Elixir.Enum','-map/2-lists^map/1-0-',2,[{file,"lib/enum.ex"},{line,1336}]},{'Elixir.FunctionClauseError',blame,3,[{file,"lib/exception.ex"},{line,1104}]},{'Elixir.Phoenix.ActionClauseError',blame,2,[{file,"lib/phoenix/exceptions.ex"},{line,59}]},{'Elixir.Plug.Debugger',render,6,[{file,"lib/plug/debugger.ex"},{line,197}]},{'Elixir.Plug.Debugger','__catch__',5,[{file,"lib/plug/debugger.ex"},{line,147}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 15,cert => undefined,has_body => true,headers => #{<<"accept-charset">> => <<"UTF-8">>,<<"accept-encoding">> => <<"gzip">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"15">>,<<"content-type">> => <<"application/x-www-form-urlencoded; charset=UTF-8">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Dalvik/2.1.0 (Linux; U; Android 9; JSN-L21 Build/HONORJSN-L21)">>,<<"x-forwarded-for">> => <<"85.26.233.154">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"85.26.233.154">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/client/hang">>,path_info => undefined,peer => {{127,0,0,1},44628},pid => <0.2728.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2729.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"client">>,<<"hang">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept-charset">>,<<"UTF-8">>},{<<"accept-encoding">>,<<"gzip">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"15">>},{<<"content-type">>,<<"application/x-www-form-urlencoded; charset=UTF-8">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Dalvik/2.1.0 (Linux; U; Android 9; JSN-L21 Build/HONORJSN-L21)">>},{<<"x-forwarded-for">>,<<"85.26.233.154">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"85.26.233.154">>}],request_path => <<"/signaling/client/hang">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 04:58:23 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.2771.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:1910078557 1 udp 2113937151 192.168.1.121 43035 typ host">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 204,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"204">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44642},pid => <0.2770.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2771.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"204">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.2770.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.2770.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh3idSDVKa8yQkAACUB">>}]}}]
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 173360
  neighbours:
2019-11-19 04:58:23 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.2770.0>, stream 1 had its request process <0.2771.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:1910078557 1 udp 2113937151 192.168.1.121 43035 typ host">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 204,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"204">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44642},pid => <0.2770.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2771.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"204">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 04:58:24 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.2775.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:842163049 1 udp 1677729535 85.26.233.154 16092 typ srflx raddr 192.168.1.121 rport 43035">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 236,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"236">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44644},pid => <0.2774.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2775.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"236">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.2774.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.2774.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh3igocAHBYwr8AACUh">>}]}}]
    trap_exit: false
    status: running
    heap_size: 6772
    stack_size: 27
    reductions: 173657
  neighbours:
2019-11-19 04:58:24 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.2774.0>, stream 1 had its request process <0.2775.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:842163049 1 udp 1677729535 85.26.233.154 16092 typ srflx raddr 192.168.1.121 rport 43035">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 236,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"236">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44644},pid => <0.2774.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2775.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"236">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 04:58:25 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.2779.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:2212263285 1 udp 33562367 3.123.78.125 54874 typ relay raddr 85.26.233.154 rport 16092">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 234,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"234">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44646},pid => <0.2778.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2779.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"234">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.2778.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.2778.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh3ikFEUmLYEgUAACVB">>}]}}]
    trap_exit: false
    status: running
    heap_size: 6772
    stack_size: 27
    reductions: 173611
  neighbours:
2019-11-19 04:58:25 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.2778.0>, stream 1 had its request process <0.2779.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:2212263285 1 udp 33562367 3.123.78.125 54874 typ relay raddr 85.26.233.154 rport 16092">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 234,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"234">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44646},pid => <0.2778.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2779.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"234">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 05:02:40 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.2856.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:1910078557 1 udp 2113937151 192.168.1.121 40143 typ host">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 204,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"204">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44676},pid => <0.2855.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2856.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"204">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.2855.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.2855.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh3xZJzO0FPAdgAACcB">>}]}}]
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 173358
  neighbours:
2019-11-19 05:02:40 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.2855.0>, stream 1 had its request process <0.2856.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:1910078557 1 udp 2113937151 192.168.1.121 40143 typ host">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 204,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"204">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44676},pid => <0.2855.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2856.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"204">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 05:02:40 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.2860.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:842163049 1 udp 1677729535 85.26.233.154 35111 typ srflx raddr 192.168.1.121 rport 40143">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 236,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"236">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44678},pid => <0.2859.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2860.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"236">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.2859.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.2859.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh3xbpkdXQsy4AAACch">>}]}}]
    trap_exit: false
    status: running
    heap_size: 6772
    stack_size: 27
    reductions: 173659
  neighbours:
2019-11-19 05:02:40 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.2859.0>, stream 1 had its request process <0.2860.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:842163049 1 udp 1677729535 85.26.233.154 35111 typ srflx raddr 192.168.1.121 rport 40143">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 236,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"236">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44678},pid => <0.2859.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2860.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"236">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 05:02:41 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.2864.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:2212263285 1 udp 33562367 3.123.78.125 50387 typ relay raddr 85.26.233.154 rport 35111">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 234,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"234">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44680},pid => <0.2863.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2864.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"234">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.2863.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.2863.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh3xfMrxXefPSEAACdB">>}]}}]
    trap_exit: false
    status: running
    heap_size: 6772
    stack_size: 27
    reductions: 173613
  neighbours:
2019-11-19 05:02:41 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.2863.0>, stream 1 had its request process <0.2864.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:2212263285 1 udp 33562367 3.123.78.125 50387 typ relay raddr 85.26.233.154 rport 35111">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 234,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"234">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44680},pid => <0.2863.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.2864.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"234">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 05:25:25 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.3000.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.BadFunctionError',term => #{'__exception__' => true,'__struct__' => 'Elixir.Phoenix.ActionClauseError',args => [#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 15,cert => undefined,has_body => true,has_read_body => true,headers => #{<<"accept-charset">> => <<"UTF-8">>,<<"accept-encoding">> => <<"gzip">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"15">>,<<"content-type">> => <<"application/x-www-form-urlencoded; charset=UTF-8">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Dalvik/2.1.0 (Linux; U; Android 9; JSN-L21 Build/HONORJSN-L21)">>,<<"x-forwarded-for">> => <<"85.26.233.154">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"85.26.233.154">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/client/hang">>,path_info => undefined,peer => {{127,0,0,1},44738},pid => <0.2999.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [#Fun<Elixir.Plug.Logger.1.16531471>],body_params => #{<<"client_id">> => <<"test1">>},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.3000.0>,params => #{<<"client_id">> => <<"test1">>},path_info => [<<"signaling">>,<<"client">>,<<"hang">>],path_params => #{},port => 80,private => #{'Elixir.SignallingWeb.Router' => {[],#{'Elixir.PhoenixSwagger.Plug.SwaggerUI' => []}},phoenix_action => hang,phoenix_controller => 'Elixir.SignallingWeb.ClientController',phoenix_endpoint => 'Elixir.SignallingWeb.Endpoint',phoenix_format => <<"json">>,phoenix_layout => {'Elixir.SignallingWeb.LayoutView',app},phoenix_pipelines => [api],phoenix_router => 'Elixir.SignallingWeb.Router',phoenix_view => 'Elixir.SignallingWeb.ClientView',plug_session_fetch => #Fun<Elixir.Plug.Session.1.35161479>},query_params => #{},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept-charset">>,<<"UTF-8">>},{<<"accept-encoding">>,<<"gzip">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"15">>},{<<"content-type">>,<<"application/x-www-form-urlencoded; charset=UTF-8">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Dalvik/2.1.0 (Linux; U; Android 9; JSN-L21 Build/HONORJSN-L21)">>},{<<"x-forwarded-for">>,<<"85.26.233.154">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"85.26.233.154">>}],request_path => <<"/signaling/client/hang">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>},{<<"x-request-id">>,<<"Fdh5A3Vimg1qyg4AACoB">>}],scheme => http,script_name => [],secret_key_base => <<"QbYUrrjFN0Riyga9S+fzwVIOzV9huX5roR8nCd2Py1QXjvP4xxmSIuPidPSkL+aJ">>,state => unset,status => nil},#{<<"client_id">> => <<"test1">>}],arity => 2,clauses => nil,function => hang,kind => nil,module => 'Elixir.SignallingWeb.ClientController'}},[{'Elixir.FunctionClauseError','-blame/3-fun-0-',2,[{file,"lib/exception.ex"},{line,1105}]},{'Elixir.Enum','-map/2-lists^map/1-0-',2,[{file,"lib/enum.ex"},{line,1336}]},{'Elixir.FunctionClauseError',blame,3,[{file,"lib/exception.ex"},{line,1104}]},{'Elixir.Phoenix.ActionClauseError',blame,2,[{file,"lib/phoenix/exceptions.ex"},{line,59}]},{'Elixir.Plug.Debugger',render,6,[{file,"lib/plug/debugger.ex"},{line,197}]},{'Elixir.Plug.Debugger','__catch__',5,[{file,"lib/plug/debugger.ex"},{line,147}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 15,cert => undefined,has_body => true,headers => #{<<"accept-charset">> => <<"UTF-8">>,<<"accept-encoding">> => <<"gzip">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"15">>,<<"content-type">> => <<"application/x-www-form-urlencoded; charset=UTF-8">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Dalvik/2.1.0 (Linux; U; Android 9; JSN-L21 Build/HONORJSN-L21)">>,<<"x-forwarded-for">> => <<"85.26.233.154">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"85.26.233.154">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/client/hang">>,path_info => undefined,peer => {{127,0,0,1},44738},pid => <0.2999.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.3000.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"client">>,<<"hang">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept-charset">>,<<"UTF-8">>},{<<"accept-encoding">>,<<"gzip">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"15">>},{<<"content-type">>,<<"application/x-www-form-urlencoded; charset=UTF-8">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Dalvik/2.1.0 (Linux; U; Android 9; JSN-L21 Build/HONORJSN-L21)">>},{<<"x-forwarded-for">>,<<"85.26.233.154">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"85.26.233.154">>}],request_path => <<"/signaling/client/hang">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.2999.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.2999.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh5A3Vimg1qyg4AACoB">>}]}}]
    trap_exit: false
    status: running
    heap_size: 4185
    stack_size: 27
    reductions: 37084
  neighbours:
2019-11-19 05:25:25 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.2999.0>, stream 1 had its request process <0.3000.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.BadFunctionError',term => #{'__exception__' => true,'__struct__' => 'Elixir.Phoenix.ActionClauseError',args => [#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 15,cert => undefined,has_body => true,has_read_body => true,headers => #{<<"accept-charset">> => <<"UTF-8">>,<<"accept-encoding">> => <<"gzip">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"15">>,<<"content-type">> => <<"application/x-www-form-urlencoded; charset=UTF-8">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Dalvik/2.1.0 (Linux; U; Android 9; JSN-L21 Build/HONORJSN-L21)">>,<<"x-forwarded-for">> => <<"85.26.233.154">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"85.26.233.154">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/client/hang">>,path_info => undefined,peer => {{127,0,0,1},44738},pid => <0.2999.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [#Fun<Elixir.Plug.Logger.1.16531471>],body_params => #{<<"client_id">> => <<"test1">>},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.3000.0>,params => #{<<"client_id">> => <<"test1">>},path_info => [<<"signaling">>,<<"client">>,<<"hang">>],path_params => #{},port => 80,private => #{'Elixir.SignallingWeb.Router' => {[],#{'Elixir.PhoenixSwagger.Plug.SwaggerUI' => []}},phoenix_action => hang,phoenix_controller => 'Elixir.SignallingWeb.ClientController',phoenix_endpoint => 'Elixir.SignallingWeb.Endpoint',phoenix_format => <<"json">>,phoenix_layout => {'Elixir.SignallingWeb.LayoutView',app},phoenix_pipelines => [api],phoenix_router => 'Elixir.SignallingWeb.Router',phoenix_view => 'Elixir.SignallingWeb.ClientView',plug_session_fetch => #Fun<Elixir.Plug.Session.1.35161479>},query_params => #{},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept-charset">>,<<"UTF-8">>},{<<"accept-encoding">>,<<"gzip">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"15">>},{<<"content-type">>,<<"application/x-www-form-urlencoded; charset=UTF-8">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Dalvik/2.1.0 (Linux; U; Android 9; JSN-L21 Build/HONORJSN-L21)">>},{<<"x-forwarded-for">>,<<"85.26.233.154">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"85.26.233.154">>}],request_path => <<"/signaling/client/hang">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>},{<<"x-request-id">>,<<"Fdh5A3Vimg1qyg4AACoB">>}],scheme => http,script_name => [],secret_key_base => <<"QbYUrrjFN0Riyga9S+fzwVIOzV9huX5roR8nCd2Py1QXjvP4xxmSIuPidPSkL+aJ">>,state => unset,status => nil},#{<<"client_id">> => <<"test1">>}],arity => 2,clauses => nil,function => hang,kind => nil,module => 'Elixir.SignallingWeb.ClientController'}},[{'Elixir.FunctionClauseError','-blame/3-fun-0-',2,[{file,"lib/exception.ex"},{line,1105}]},{'Elixir.Enum','-map/2-lists^map/1-0-',2,[{file,"lib/enum.ex"},{line,1336}]},{'Elixir.FunctionClauseError',blame,3,[{file,"lib/exception.ex"},{line,1104}]},{'Elixir.Phoenix.ActionClauseError',blame,2,[{file,"lib/phoenix/exceptions.ex"},{line,59}]},{'Elixir.Plug.Debugger',render,6,[{file,"lib/plug/debugger.ex"},{line,197}]},{'Elixir.Plug.Debugger','__catch__',5,[{file,"lib/plug/debugger.ex"},{line,147}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 15,cert => undefined,has_body => true,headers => #{<<"accept-charset">> => <<"UTF-8">>,<<"accept-encoding">> => <<"gzip">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"15">>,<<"content-type">> => <<"application/x-www-form-urlencoded; charset=UTF-8">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Dalvik/2.1.0 (Linux; U; Android 9; JSN-L21 Build/HONORJSN-L21)">>,<<"x-forwarded-for">> => <<"85.26.233.154">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"85.26.233.154">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/client/hang">>,path_info => undefined,peer => {{127,0,0,1},44738},pid => <0.2999.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.3000.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"client">>,<<"hang">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept-charset">>,<<"UTF-8">>},{<<"accept-encoding">>,<<"gzip">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"15">>},{<<"content-type">>,<<"application/x-www-form-urlencoded; charset=UTF-8">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Dalvik/2.1.0 (Linux; U; Android 9; JSN-L21 Build/HONORJSN-L21)">>},{<<"x-forwarded-for">>,<<"85.26.233.154">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"85.26.233.154">>}],request_path => <<"/signaling/client/hang">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 05:25:45 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.3043.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:1498970736 1 udp 2113937151 10.224.117.49 43907 typ host">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 204,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"204">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44752},pid => <0.3042.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.3043.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"204">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.3042.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.3042.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh5CAYvzfcoMXsAACrh">>}]}}]
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 173368
  neighbours:
2019-11-19 05:25:45 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.3042.0>, stream 1 had its request process <0.3043.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:1498970736 1 udp 2113937151 10.224.117.49 43907 typ host">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 204,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"204">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44752},pid => <0.3042.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.3043.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"204">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 05:25:45 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.3047.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:842163049 1 udp 1677729535 85.26.233.154 32986 typ srflx raddr 10.224.117.49 rport 43907">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 236,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"236">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44754},pid => <0.3046.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.3047.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"236">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.3046.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.3046.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh5CDRth5JY7CAAACsB">>}]}}]
    trap_exit: false
    status: running
    heap_size: 6772
    stack_size: 27
    reductions: 173663
  neighbours:
2019-11-19 05:25:45 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.3046.0>, stream 1 had its request process <0.3047.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:842163049 1 udp 1677729535 85.26.233.154 32986 typ srflx raddr 10.224.117.49 rport 43907">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 236,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"236">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44754},pid => <0.3046.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.3047.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"236">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 05:25:46 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.3051.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:2212263285 1 udp 33562367 3.123.78.125 61933 typ relay raddr 85.26.233.154 rport 32986">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 234,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"234">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44756},pid => <0.3050.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.3051.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"234">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.3050.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.3050.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh5CGle_U9mxHQAACsh">>}]}}]
    trap_exit: false
    status: running
    heap_size: 6772
    stack_size: 27
    reductions: 173611
  neighbours:
2019-11-19 05:25:46 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.3050.0>, stream 1 had its request process <0.3051.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:2212263285 1 udp 33562367 3.123.78.125 61933 typ relay raddr 85.26.233.154 rport 32986">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 234,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"234">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44756},pid => <0.3050.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.3051.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"234">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 05:54:13 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.3162.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:1498970736 1 udp 2113937151 10.224.117.49 43558 typ host">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 204,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"204">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44808},pid => <0.3161.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.3162.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"204">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.3161.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.3161.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh6ldfUUVqfBfcAAC0B">>}]}}]
    trap_exit: false
    status: running
    heap_size: 2586
    stack_size: 27
    reductions: 173366
  neighbours:
2019-11-19 05:54:13 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.3161.0>, stream 1 had its request process <0.3162.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:1498970736 1 udp 2113937151 10.224.117.49 43558 typ host">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 204,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"204">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44808},pid => <0.3161.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.3162.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"204">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 05:54:15 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.3166.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:842163049 1 udp 1677729535 85.26.233.154 11152 typ srflx raddr 10.224.117.49 rport 43558">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 236,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"236">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44810},pid => <0.3165.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.3166.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"236">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.3165.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.3165.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh6licriR2ZwZwAAC0h">>}]}}]
    trap_exit: false
    status: running
    heap_size: 6772
    stack_size: 27
    reductions: 173659
  neighbours:
2019-11-19 05:54:15 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.3165.0>, stream 1 had its request process <0.3166.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:842163049 1 udp 1677729535 85.26.233.154 11152 typ srflx raddr 10.224.117.49 rport 43558">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 236,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"236">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44810},pid => <0.3165.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.3166.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"236">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
2019-11-19 05:54:15 =CRASH REPORT====
  crasher:
    initial call: cowboy_stream_h:request_process/3
    pid: <0.3170.0>
    registered_name: []
    exception exit: {{{{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:2212263285 1 udp 33562367 3.123.78.125 51874 typ relay raddr 85.26.233.154 rport 11152">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 234,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"234">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44812},pid => <0.3169.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.3170.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"234">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},[{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]}
    ancestors: [<0.3169.0>,<0.1198.0>,<0.1197.0>,'Elixir.SignallingWeb.Endpoint','Elixir.Signalling.Supervisor',<0.1182.0>]
    message_queue_len: 0
    messages: []
    links: [<0.3169.0>]
    dictionary: [{logger_metadata,{true,[{request_id,<<"Fdh6lliTAP7KzzIAAC1B">>}]}}]
    trap_exit: false
    status: running
    heap_size: 6772
    stack_size: 27
    reductions: 173617
  neighbours:
2019-11-19 05:54:15 =ERROR REPORT====
Ranch listener 'Elixir.SignallingWeb.Endpoint.HTTP', connection process <0.3169.0>, stream 1 had its request process <0.3170.0> exit with reason {{#{'__exception__' => true,'__struct__' => 'Elixir.FunctionClauseError',args => nil,arity => 2,clauses => nil,function => sdp_call,kind => nil,module => 'Elixir.Signalling.Notifier'},[{'Elixir.Signalling.Notifier',sdp_call,[[#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9a9b7935-5d31-431c-b354-88b1c6f3542c">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019},serial_key => <<"3157588642d753b0">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,token => <<"e4zyYuvG_oY:APA91bHL9P7qsf_DQIQjfImwJaxKnmjqmm3XTQwCL-1vxojQoNwpVL-oIA_NWLDT-X1Vupuor7a4cCqqF3FfA3faL9A0POGD_QWmXSO3ghgT2Qz5UddYwApYFAlfEFAcdGDSr5CHsKsf">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 38,month => 11,second => 30,year => 2019}}],id => <<"b328ecd7-d104-461d-b945-6b9760f58b05">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 8,month => 11,second => 53,year => 2019},password => <<"$2b$12$oOX2mvAXzIhT50XnmsaPpeTRno2B4uUAowr2LyuQ3Ed/1o.5.VG1q">>,phone_number => <<"89176200645">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<208,149,208,178,208,179,208,181,208,189,208,184,208,185,32,208,154,208,176,208,187,208,180,208,184,208,189>>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 11,microsecond => {0,0},minute => 36,month => 11,second => 50,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Tenant',source => <<"tenants">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Tenant',apartment => #{'__cardinality__' => one,'__field__' => apartment,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},apartment_id => <<"cb738cd9-b5ab-41fa-9351-1cb91a5ae23e">>,company => #{'__cardinality__' => one,'__field__' => company,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},company_id => <<"3610c9af-d31b-4806-84f1-db896e4aab74">>,deleted => false,devices => [#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9e411232-1c65-4deb-ba6a-d77786e023d7">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 14,microsecond => {0,0},minute => 25,month => 11,second => 40,year => 2019},serial_key => <<"2a05092ea1c0c777">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cbrDPJM9piw:APA91bF0jAJd2IYycMQxuXVeUjNy5I3Yy2Le9ZXcjso14ielexAndVUhXIBeSLvDcmKuo_GsANHXTXjiXE061Jrw_4K_HG4HQAlrs2AJRUEJbeIhAEWf7NW0vuk3EHAAr7dLVXOPexHi">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 9,microsecond => {0,0},minute => 36,month => 11,second => 12,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"9679e299-55b8-4498-943b-160c7c877da0">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 17,hour => 16,microsecond => {0,0},minute => 23,month => 11,second => 29,year => 2019},serial_key => <<"9e7225961a706a65">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"cOr_nTgNJBM:APA91bELiM_yN8yM0TpQmQfn2BNlmurhJlT3UjhZtaMy3oV1RvEfSEtdIaVgblUBw8-vT7fV6bVlPuDuUWwPvPEhzg-vWnVZqt6rX_h4EVGMvwWoea7Ra66pFEcr77eF9ySJuSBCj3v1">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 11,month => 11,second => 57,year => 2019}},#{'__meta__' => #{'__struct__' => 'Elixir.Ecto.Schema.Metadata',context => nil,prefix => nil,schema => 'Elixir.Domoapi.People.Device',source => <<"devices">>,state => loaded},'__struct__' => 'Elixir.Domoapi.People.Device',deleted => false,device_type => <<"Android">>,id => <<"178d035d-3f31-4b74-b64b-6d5505ed4bf6">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 38,year => 2019},serial_key => <<"3098ad9eabaf20fd">>,tenant => #{'__cardinality__' => one,'__field__' => tenant,'__owner__' => 'Elixir.Domoapi.People.Device','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},tenant_id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,token => <<"d4CfUwvd6g0:APA91bHPkAArHm1p5IHU2zJ3Ea0Vc1fYxhmRp8QAZFRhUBahxqMda2dHGpSXo3wdtc59kauYs8lZWG4ly9nIxr-Re2Xaz1OguNsbUFiKu_yxzLVhgdXm38g18Us1Rv495cY3UHoFK3mp">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 10,microsecond => {0,0},minute => 16,month => 11,second => 42,year => 2019}}],id => <<"776fc3e4-203c-437f-ab27-99918180718f">>,inserted_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 15,hour => 12,microsecond => {0,0},minute => 39,month => 11,second => 36,year => 2019},password => <<"$2b$12$XlddKF/xtUSibCfUPGIFder8BVD04Qh9qhAIdee/iSdJE48pNnIKe">>,phone_number => <<"89991945767">>,photos => #{'__cardinality__' => many,'__field__' => photos,'__owner__' => 'Elixir.Domoapi.People.Tenant','__struct__' => 'Elixir.Ecto.Association.NotLoaded'},raw_password => nil,title => <<"Azat verni 2 rubl">>,updated_at => #{'__struct__' => 'Elixir.NaiveDateTime',calendar => 'Elixir.Calendar.ISO',day => 18,hour => 7,microsecond => {0,0},minute => 4,month => 11,second => 13,year => 2019}}],{#{<<"candidate">> => <<"candidate:2212263285 1 udp 33562367 3.123.78.125 51874 typ relay raddr 85.26.233.154 rport 11152">>,<<"sdpMLineIndex">> => nil,<<"sdpMid">> => nil}}],[{file,"lib/signalling/notifier.ex"},{line,36}]},{'Elixir.Signalling',call_sdp,3,[{file,"lib/signalling.ex"},{line,29}]},{'Elixir.SignallingWeb.IntercomController',sdp_intercom,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,69}]},{'Elixir.SignallingWeb.IntercomController',action,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.IntercomController',phoenix_controller_pipeline,2,[{file,"lib/signalling_web/controllers/intercom_controller.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint',instrument,4,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Router','__call__',1,[{file,"lib/phoenix/router.ex"},{line,275}]},{'Elixir.SignallingWeb.Endpoint',plug_builder_call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.SignallingWeb.Endpoint','call (overridable 3)',2,[{file,"lib/plug/debugger.ex"},{line,122}]},{'Elixir.SignallingWeb.Endpoint',call,2,[{file,"lib/signalling_web/endpoint.ex"},{line,1}]},{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,33}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]},{'Elixir.SignallingWeb.Endpoint',call,[#{'__struct__' => 'Elixir.Plug.Conn',adapter => {'Elixir.Plug.Cowboy.Conn',#{bindings => #{},body_length => 234,cert => undefined,has_body => true,headers => #{<<"accept">> => <<"*/*">>,<<"accept-encoding">> => <<"gzip, deflate">>,<<"connection">> => <<"upgrade">>,<<"content-length">> => <<"234">>,<<"content-type">> => <<"application/json">>,<<"host">> => <<"signaling-api.domoface.ru">>,<<"user-agent">> => <<"Python/3.7 aiohttp/3.6.2">>,<<"x-forwarded-for">> => <<"87.76.0.8">>,<<"x-forwarded-host">> => <<"signaling-api.domoface.ru">>,<<"x-forwarded-port">> => <<"443">>,<<"x-forwarded-proto">> => <<"https">>,<<"x-real-ip">> => <<"87.76.0.8">>},host => <<"signaling-api.domoface.ru">>,host_info => undefined,method => <<"POST">>,path => <<"/signaling/intercom/sdp_intercom">>,path_info => undefined,peer => {{127,0,0,1},44812},pid => <0.3169.0>,port => 80,qs => <<>>,ref => 'Elixir.SignallingWeb.Endpoint.HTTP',scheme => <<"http">>,sock => {{127,0,0,1},8002},streamid => 1,version => 'HTTP/1.1'}},assigns => #{},before_send => [],body_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => body_params},cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},halted => false,host => <<"signaling-api.domoface.ru">>,method => <<"POST">>,owner => <0.3170.0>,params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => params},path_info => [<<"signaling">>,<<"intercom">>,<<"sdp_intercom">>],path_params => #{},port => 80,private => #{},query_params => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => query_params},query_string => <<>>,remote_ip => {127,0,0,1},req_cookies => #{'__struct__' => 'Elixir.Plug.Conn.Unfetched',aspect => cookies},req_headers => [{<<"accept">>,<<"*/*">>},{<<"accept-encoding">>,<<"gzip, deflate">>},{<<"connection">>,<<"upgrade">>},{<<"content-length">>,<<"234">>},{<<"content-type">>,<<"application/json">>},{<<"host">>,<<"signaling-api.domoface.ru">>},{<<"user-agent">>,<<"Python/3.7 aiohttp/3.6.2">>},{<<"x-forwarded-for">>,<<"87.76.0.8">>},{<<"x-forwarded-host">>,<<"signaling-api.domoface.ru">>},{<<"x-forwarded-port">>,<<"443">>},{<<"x-forwarded-proto">>,<<"https">>},{<<"x-real-ip">>,<<"87.76.0.8">>}],request_path => <<"/signaling/intercom/sdp_intercom">>,resp_body => nil,resp_cookies => #{},resp_headers => [{<<"cache-control">>,<<"max-age=0, private, must-revalidate">>}],scheme => http,script_name => [],secret_key_base => nil,state => unset,status => nil},[]]}} and stacktrace [{'Elixir.Phoenix.Endpoint.Cowboy2Handler',init,2,[{file,"lib/phoenix/endpoint/cowboy2_handler.ex"},{line,42}]},{cowboy_handler,execute,2,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_handler.erl"},{line,41}]},{cowboy_stream_h,execute,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,320}]},{cowboy_stream_h,request_process,3,[{file,"/home/ubuntu/domoapi/domoapi/deps/cowboy/src/cowboy_stream_h.erl"},{line,302}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,249}]}]
